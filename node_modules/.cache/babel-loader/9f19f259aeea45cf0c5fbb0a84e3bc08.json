{"ast":null,"code":"import _regeneratorRuntime from \"/home/raoudha/Desktop/Gestion-Biblio/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/raoudha/Desktop/Gestion-Biblio/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/raoudha/Desktop/Gestion-Biblio/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/raoudha/Desktop/Gestion-Biblio/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/raoudha/Desktop/Gestion-Biblio/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/raoudha/Desktop/Gestion-Biblio/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/raoudha/Desktop/Gestion-Biblio/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/raoudha/Desktop/Gestion-Biblio/src/PureComp/BookListElem.jsx\";\nimport React, { Component } from \"react\";\nimport BookListElem from \"./BookListElem\";\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nvar size = 5;\n\nvar BooksList =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(BooksList, _Component);\n\n  function BooksList(props) {\n    var _this;\n\n    _classCallCheck(this, BooksList);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(BooksList).call(this, props));\n    _this.state = {\n      arr: [],\n      books: _this.props.books,\n      totalPages: _this.props.totalPages\n    };\n    return _this;\n  }\n\n  _createClass(BooksList, [{\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var response, arr2, totalPages, i;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                console.log(\"%%\" + this.state.books);\n                _context.next = 3;\n                return axios.get('http://localhost:3000/api/booksData/count');\n\n              case 3:\n                response = _context.sent;\n\n                if (response.status === 200) {\n                  arr2 = [];\n                  totalPages = Math.ceil(response.data.count / size);\n\n                  for (i = 1; i <= totalPages; i++) {\n                    arr2.push(i);\n                    this.getPage();\n                  }\n\n                  this.setState({\n                    totalPages: totalPages,\n                    arr: arr2\n                  });\n                  console.log(\".....\" + this.state.totalPages);\n                } else {\n                  console.log(response.status);\n                }\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      }\n\n      return componentDidMount;\n    }()\n  }, {\n    key: \"getPage\",\n    value: function getPage() {\n      var _this2 = this;\n\n      var i = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\n      // console.log(i)\n      if (i === 0) {\n        i++;\n      }\n\n      var skip = (i - 1) * size;\n      var res = axios.get(\"http://localhost:3000/api/booksData\", {\n        params: {\n          filter: {\n            \"include\": \"BookAuth\",\n            \"limit\": size,\n            \"offset\": skip\n          }\n        }\n      }).then(function (res) {\n        _this2.setState({\n          books: res.data\n        });\n\n        console.log(_this2.state.books);\n      }).catch(function (err) {\n        return alert(err);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60\n        },\n        __self: this\n      }, React.createElement(\"ul\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      }, this.state.books.map(function (elem, key) {\n        return React.createElement(BookListElem, {\n          title: elem.title,\n          author: elem.author,\n          price: elem.price,\n          isbn: elem.isbn,\n          key: key,\n          id: elem.id,\n          idx: key,\n          image: elem.image,\n          bookAuthor: elem.BookAuth,\n          handleClick: _this3.props.handleClick,\n          handleChange: _this3.props.handleChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 64\n          },\n          __self: this\n        });\n      })));\n    }\n  }]);\n\n  return BooksList;\n}(Component);\n\nexport default BooksList;","map":{"version":3,"sources":["/home/raoudha/Desktop/Gestion-Biblio/src/PureComp/BookListElem.jsx"],"names":["React","Component","BookListElem","axios","Link","size","BooksList","props","state","arr","books","totalPages","console","log","get","response","status","arr2","Math","ceil","data","count","i","push","getPage","setState","skip","res","params","filter","then","catch","err","alert","map","elem","key","title","author","price","isbn","id","image","BookAuth","handleClick","handleChange"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport BookListElem from \"./BookListElem\";\nimport axios from 'axios'\nimport {Link} from 'react-router-dom'\n\n\nconst size=5\n\nclass BooksList extends Component {\n  constructor(props) {\n    super(props);\n      this.state = {\n      arr:[],\n      books:this.props.books,\n      totalPages:this.props.totalPages\n    }\n  }\n  async componentDidMount(){\n    console.log(\"%%\"+this.state.books)\n    const response=await axios.get('http://localhost:3000/api/booksData/count')\n    if(response.status===200)\n    {\n\n      let arr2=[]\n      let totalPages = Math.ceil((response.data.count)/size);\n    for (let i=1;i<=totalPages;i++) {\n    \n      arr2.push(i)\n      this.getPage()\n   }\n      this.setState({totalPages, arr:arr2})\n      console.log(\".....\"+this.state.totalPages)\n    }\n    else \n    {\n      console.log (response.status)\n    }\n    \n  }\n\n  getPage(i=0){\n    // console.log(i)\n   if(i===0){i++}\n   let skip = (i - 1) * size\n       const res=axios.get(\"http://localhost:3000/api/booksData\", {\n  params: {\n filter:{\n   \"include\": \"BookAuth\",\n    \"limit\":size,\n    \"offset\":skip,\n }}})\n .then(res=>{this.setState({books:res.data})\n  console.log(this.state.books)\n})\n .catch(err => alert(err)) \n}\n\n  render() {\n    return (\n     <div>  \n      <ul>\n        {this.state.books.map((elem, key) => {\n          return (\n            <BookListElem\n              title={elem.title}\n              author={elem.author}\n              price={elem.price}\n              isbn={elem.isbn}\n              key={key}\n              id={elem.id}\n              idx={key}\n              image={elem.image}\n               bookAuthor={elem.BookAuth}\n              handleClick={this.props.handleClick}\n              handleChange={this.props.handleChange}\n            />\n          );\n        })\n       }\n      </ul>\n      \n      </div>\n    );\n  }\n}\n\nexport default BooksList;\n"]},"metadata":{},"sourceType":"module"}