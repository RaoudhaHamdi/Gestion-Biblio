{"ast":null,"code":"import _regeneratorRuntime from \"/home/raoudha/Desktop/Gestion-Biblio/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/raoudha/Desktop/Gestion-Biblio/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/raoudha/Desktop/Gestion-Biblio/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/raoudha/Desktop/Gestion-Biblio/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/raoudha/Desktop/Gestion-Biblio/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/raoudha/Desktop/Gestion-Biblio/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/raoudha/Desktop/Gestion-Biblio/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/raoudha/Desktop/Gestion-Biblio/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/raoudha/Desktop/Gestion-Biblio/src/App.js\";\nimport React, { Component } from \"react\";\nimport PropTypes from 'prop-types';\nimport \"./App.css\";\nimport BooksList from \"./PureComp/BooksList\";\nimport NewBook from \"./PureComp/NewBook\";\nimport Author from \"./PureComp/NewAuthor\";\nimport BooksAuthor from \"./PureComp/booksAuthor\";\nimport Pagination from './PureComp/pagination';\nimport { BrowserRouter as Router, Switch, Route, Link } from \"react-router-dom\";\nimport axios from \"axios\";\nvar size = 5;\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App(prop) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, prop));\n\n    _this.add = function (book, id) {\n      //e.preventDefault();\n      // console.log(book)\n      axios.post(\"http://localhost:3000/api/Authors/\".concat(id, \"/booksData\"), book).then(function (res) {\n        return res.data;\n      }).catch(function (err) {\n        return alert(err);\n      });\n    };\n\n    _this.state = {\n      books: [],\n      idx: \"\",\n      title: \"\",\n      author: \"\",\n      price: \"\",\n      isbn: \"\",\n      description: \"\",\n      id: \"\",\n      // BookAuth:\"\"\n      skip: \"\",\n      currPage: 1,\n      totalPages: \"\"\n    }; // this.handleClick = this.handleClick.bind(this);\n\n    _this.add = _this.add.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    console.log(\"***\" + _this.state.skip + \"***\");\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var response, books;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return axios.get(\"http://localhost:3000/api/booksData\", {\n                  params: {\n                    filter: {\n                      \"include\": \"BookAuth\",\n                      \"limit\": size,\n                      \"offset\": this.state.skip\n                    }\n                  }\n                });\n\n              case 2:\n                response = _context.sent;\n\n                //  console.log(response.data)\n                if (response.status === 200) {\n                  books = [];\n                  response.data.map(function (prop) {\n                    var book = {\n                      title: prop.title,\n                      author: prop.author,\n                      isbn: prop.isbn,\n                      price: prop.price,\n                      description: prop.description,\n                      id: prop.id,\n                      BookAuth: prop.BookAuth\n                    };\n                    books.push(book);\n                  });\n                  this.setState({\n                    books: books\n                  });\n                } else {\n                  // handle error\n                  console.log(response.status);\n                }\n\n                try {} catch (e) {}\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      }\n\n      return componentDidMount;\n    }()\n  }, {\n    key: \"getPage\",\n    // async handleClick(id,idx) {\n    //   console.log(this.state.idx)\n    //   const booksCopy=Array.from(this.state.books)\n    //   const response=await axios.delete(`http://localhost:3000/api/booksData/${id}`)\n    //   if (response.status === 200) {\n    //       booksCopy.splice(idx, 1)\n    //       this.setState({books: booksCopy})\n    // }\n    // else {alert (response.status)}\n    // }\n    // setCurrentPage=(num)=>{\n    //   this.setState({\n    //      currPage:num,\n    //      skip :(this.state.currPage - 1) * size\n    //   }, ()=>\n    //   {console.log(\"%%%%%\"+this.state.skip)\n    // }\n    //   )\n    //   }\n    value: function getPage(i) {\n      var _this2 = this;\n\n      console.log(i);\n      var skip = (i - 1) * size;\n      axios.get(\"http://localhost:3000/api/booksData\", {\n        params: {\n          filter: {\n            \"include\": \"BookAuth\",\n            \"limit\": size,\n            \"offset\": skip\n          }\n        }\n      }).then(function (res) {\n        _this2.setState({\n          books: res.data\n        });\n\n        console.log(_this2.state.books);\n      }).catch(function (err) {\n        return alert(err);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"App\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, React.createElement(Router, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, React.createElement(\"ul\", {\n        className: \"list-style\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, \"Home\")), React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: \"/addBook\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, \"New Book\")), React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: \"/addAuthor\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, \"New Author\"))), React.createElement(Switch, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, React.createElement(Route, {\n        exact: true,\n        path: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: \"/addAuthor\",\n        component: Author,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: \"/addBook\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, React.createElement(NewBook, {\n        onAddBook: this.add,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      })), React.createElement(Route, {\n        path: \"/BooksAuthor/:id\",\n        component: BooksAuthor,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      })))));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["/home/raoudha/Desktop/Gestion-Biblio/src/App.js"],"names":["React","Component","PropTypes","BooksList","NewBook","Author","BooksAuthor","Pagination","BrowserRouter","Router","Switch","Route","Link","axios","size","App","prop","add","book","id","post","then","res","data","catch","err","alert","state","books","idx","title","author","price","isbn","description","skip","currPage","totalPages","bind","console","log","get","params","filter","response","status","map","BookAuth","push","setState","e","i"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport PropTypes from 'prop-types';\nimport \"./App.css\";\nimport BooksList from \"./PureComp/BooksList\";\nimport NewBook from \"./PureComp/NewBook\";\nimport Author from \"./PureComp/NewAuthor\";\nimport BooksAuthor from \"./PureComp/booksAuthor\";\nimport Pagination from './PureComp/pagination'\nimport { BrowserRouter as Router,Switch, Route, Link } from \"react-router-dom\";\nimport axios from \"axios\";\n\nconst size=5\n\n\nclass App extends Component {\n  constructor(prop) {\n    super(prop);\n\n    this.state = {\n      books: [],\n      idx: \"\",\n      title: \"\",\n      author: \"\",\n      price: \"\",\n      isbn: \"\",\n      description: \"\",\n      id:\"\",\n      // BookAuth:\"\"\n      skip:\"\",\n      currPage:1,\n      totalPages:\"\"\n    };\n    \n    // this.handleClick = this.handleClick.bind(this);\n    this.add=this.add.bind(this)\n    console.log(\"***\"+this.state.skip+\"***\")\n  }\n  \n  \n  \n  async componentDidMount() {\n     \n    const response = await axios.get(\"http://localhost:3000/api/booksData\", {\n      params: {\n        filter:{\n          \"include\": \"BookAuth\",\n            \"limit\":size,\n            \"offset\":this.state.skip,\n        }\n      }\n    });\n    \n    //  console.log(response.data)\n    if (response.status === 200) {\n      const books = [];\n      response.data.map(prop => {\n        const book = {\n          title: prop.title,\n          author: prop.author,\n          isbn: prop.isbn,\n          price: prop.price,\n          description: prop.description,\n          id: prop.id,\n          BookAuth: prop.BookAuth\n        };\n        books.push(book);\n      });\n\n     this.setState({ books: books });\n    } else {\n      // handle error\n      console.log(response.status);\n    }\n    \n    try{\n\n    }catch(e){\n\n    }\n  }\n\n\n    add =(book,id) =>{\n      //e.preventDefault();\n      // console.log(book)\n       axios.post(`http://localhost:3000/api/Authors/${id}/booksData`,book)\n      .then(res=> res.data )\n      .catch(err => alert(err)) \n    }\n  // async handleClick(id,idx) {\n  //   console.log(this.state.idx)\n  //   const booksCopy=Array.from(this.state.books)\n  //   const response=await axios.delete(`http://localhost:3000/api/booksData/${id}`)\n  //   if (response.status === 200) {\n  //       booksCopy.splice(idx, 1)\n  //       this.setState({books: booksCopy})\n\n  // }\n  // else {alert (response.status)}\n  // }\n\n  // setCurrentPage=(num)=>{\n  //   this.setState({\n  //      currPage:num,\n  //      skip :(this.state.currPage - 1) * size\n  //   }, ()=>\n  //   {console.log(\"%%%%%\"+this.state.skip)\n  // }\n  //   )\n  //   }\n  \n  getPage(i){\n    console.log(i)\n   let skip = (i - 1) * size\n       axios.get(\"http://localhost:3000/api/booksData\", {\n  params: {\n filter:{\n   \"include\": \"BookAuth\",\n    \"limit\":size,\n    \"offset\":skip,\n }}})\n .then(res=> { this.setState({books:res.data})\n console.log(this.state.books)})\n .catch(err => alert(err)) \n}\n\n  render(){\n    return (\n      <div className=\"App\">\n             <Router>\n          <div>\n            <ul className=\"list-style\">\n              <li>\n                <Link to=\"/\">Home</Link>\n              </li>\n              <li>\n                <Link to=\"/addBook\">New Book</Link>\n              </li>\n              <li>\n                <Link to=\"/addAuthor\">New Author</Link>\n              </li>\n            </ul>\n          <Switch>\n            <Route exact path=\"/\">\n              {/* <BooksList\n                 books={this.state.books}\n                handleClick={this.handleClick}\n                handleChange={this.handleChange}\n              />  */}\n            </Route>\n            <Route  path=\"/addAuthor\" component={Author}></Route>\n            <Route  path=\"/addBook\">\n              <NewBook onAddBook={this.add}/>\n            </Route>\n            <Route path=\"/BooksAuthor/:id\" component={BooksAuthor}/>\n            {/* <BooksAuthor booAuth={this.state.books}/> */}\n            {/* </Route> */}\n          </Switch>\n          </div>\n        </Router>\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}