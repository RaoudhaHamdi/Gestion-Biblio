{"ast":null,"code":"import _defineProperty from \"/home/raoudha/Desktop/Gestion-Biblio/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/home/raoudha/Desktop/Gestion-Biblio/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/raoudha/Desktop/Gestion-Biblio/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/raoudha/Desktop/Gestion-Biblio/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/raoudha/Desktop/Gestion-Biblio/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/raoudha/Desktop/Gestion-Biblio/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/raoudha/Desktop/Gestion-Biblio/src/PureComp/NewBook.jsx\";\nimport React, { Component } from \"react\";\nimport axios from 'axios';\n\nvar NewBook =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(NewBook, _Component);\n\n  function NewBook(props) {\n    var _this;\n\n    _classCallCheck(this, NewBook);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(NewBook).call(this, props));\n\n    _this.handleInputChange = function (event) {\n      var target = event.target;\n      var value = target.type === \"checkbox\" ? target.checked : target.value;\n      var name = target.name;\n\n      _this.setState(_defineProperty({}, name, value));\n    };\n\n    _this.handleSubmit = function (e) {\n      e.preventDefault();\n      var book = {\n        title: _this.state.title,\n        author: _this.state.author,\n        isbn: _this.state.isbn,\n        price: _this.state.price,\n        description: _this.state.description\n      };\n      var id = document.getElementById('select').value;\n      console.log(id);\n\n      _this.props.onAddBook(book, id);\n\n      window.location.reload();\n    };\n\n    _this.handleChange = function (idx) {\n      var selectedBook = _this.state.books[idx];\n\n      _this.setState({\n        idx: idx,\n        title: selectedBook.title,\n        author: selectedBook.a3uthor,\n        price: selectedBook.price,\n        isbn: selectedBook.isbn,\n        description: selectedBook.description\n      });\n    };\n\n    _this.handleEdit = function () {\n      var book = {\n        title: _this.state.title,\n        author: _this.state.author,\n        isbn: _this.state.isbn,\n        price: _this.state.price,\n        description: _this.state.description\n      };\n      var booksCopy = Array.from(_this.state.books); // booksCopy[this.state.idx] = book;\n\n      booksCopy.splice(_this.state.idx, 1);\n      booksCopy.splice(_this.state.idx, 0, book);\n\n      _this.setState({\n        books: booksCopy\n      });\n    };\n\n    _this.selectChange = function (e) {\n      var value = e.target.value;\n      console.log(value);\n      console.log(_this.state.authorData);\n    };\n\n    _this.state = {\n      authorData: []\n    };\n    return _this;\n  } //onChange input tag\n\n\n  _createClass(NewBook, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      axios.get('http://localhost:3000/api/Authors').then(function (response) {\n        if (response.status === 200) {\n          _this2.setState({\n            authorData: response.data\n          });\n        }\n      }).catch(function (error) {\n        console.log(error);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      // let {title, isbn ,author ,price ,description} = this.state;\n      // ()=>{this.props.add(title, isbn ,author ,price ,description)}\n      return React.createElement(\"form\", {\n        onSubmit: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"form\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, \"Title:\", React.createElement(\"input\", {\n        type: \"text\",\n        name: \"title\",\n        placeholder: \"please enter the title\",\n        onChange: this.handleInputChange //   value={this.state.title} \n        ,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      })), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, \"Author:\", React.createElement(\"select\", {\n        id: \"select\",\n        onChange: this.selectChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, this.state.authorData.map(function (el) {\n        return React.createElement(\"option\", {\n          value: el.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 112\n          },\n          __self: this\n        }, el.name);\n      }))), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, \"Price:\", React.createElement(\"input\", {\n        type: \"number\",\n        name: \"price\",\n        placeholder: \"please enter the price\",\n        onChange: this.handleInputChange // value={this.state.price}\n        ,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      })), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, \"ISBN:\", React.createElement(\"input\", {\n        type: \"number\",\n        name: \"isbn\",\n        placeholder: \"please enter the isbn\",\n        onChange: this.handleInputChange // value={this.state.isbn}\n        ,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      })), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, \"Description:\", React.createElement(\"textarea\", {\n        placeholder: \"please enter the description\",\n        name: \"description\",\n        onChange: this.handleInputChange // value={this.state.description}\n        ,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      })), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      })), React.createElement(\"input\", {\n        type: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"button\",\n        value: \"edit\",\n        onClick: this.handleEdit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return NewBook;\n}(Component);\n\nexport default NewBook;","map":{"version":3,"sources":["/home/raoudha/Desktop/Gestion-Biblio/src/PureComp/NewBook.jsx"],"names":["React","Component","axios","NewBook","props","handleInputChange","event","target","value","type","checked","name","setState","handleSubmit","e","preventDefault","book","title","state","author","isbn","price","description","id","document","getElementById","console","log","onAddBook","window","location","reload","handleChange","idx","selectedBook","books","a3uthor","handleEdit","booksCopy","Array","from","splice","selectChange","authorData","get","then","response","status","data","catch","error","map","el"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport axios from 'axios'\n\nclass NewBook extends Component {\n  constructor(props)\n  {\n    super(props);\n    this.state={\n      authorData:[]\n    }\n  }\n  //onChange input tag\n  handleInputChange = event => {\n    const target = event.target;\n    const value = target.type === \"checkbox\" ? target.checked : target.value;\n    const name = target.name;\n\n    this.setState({\n      [name]: value,\n      \n    });\n  };\n  componentDidMount() {\n    axios.get('http://localhost:3000/api/Authors')\n   \n          .then((response)=> {\n            if(response.status===200){\n            this.setState({authorData:response.data})\n            }\n            }\n            )\n          .catch((error)=> {\n            console.log(error)\n          })\n  }\n  handleSubmit = e => {\n    e.preventDefault();\n\n    const book = {\n      title: this.state.title,\n      author: this.state.author,\n      isbn: this.state.isbn,\n      price: this.state.price,\n      description: this.state.description,\n    \n    };\n    const id=document.getElementById('select').value\n    console.log(id)\n    this.props.onAddBook(book,id);\n    window.location.reload();\n  };\n\n  handleChange = idx => {\n    const selectedBook = this.state.books[idx];\n\n    this.setState({\n      idx: idx,\n      title: selectedBook.title,\n      author: selectedBook.a3uthor,\n      price: selectedBook.price,\n      isbn: selectedBook.isbn,\n      description: selectedBook.description\n    });\n  };\n\n  \n\n  handleEdit = () => {\n    const book = {\n      title: this.state.title,\n      author: this.state.author,\n      isbn: this.state.isbn,\n      price: this.state.price,\n      description: this.state.description\n    };\n\n    const booksCopy = Array.from(this.state.books);\n    // booksCopy[this.state.idx] = book;\n    booksCopy.splice(this.state.idx, 1);\n    booksCopy.splice(this.state.idx, 0, book);\n\n    this.setState({ books: booksCopy });\n  }\n//onChange for select tag\n selectChange=(e)=>{\n const value=e.target.value;\n console.log(value)\n console.log(this.state.authorData)\n  }\n\n  render() {\n    // let {title, isbn ,author ,price ,description} = this.state;\n    // ()=>{this.props.add(title, isbn ,author ,price ,description)}\n    return (\n      <form onSubmit={this.handleSubmit}>\n      <div className=\"form\">\n        <label>\n          Title:\n          <input\n            type=\"text\"\n            name=\"title\"\n            placeholder=\"please enter the title\"\n            onChange={this.handleInputChange}\n        //   value={this.state.title} \n          />\n        </label>\n        <br />\n        <label>\n          Author:\n        <select id=\"select\" onChange={this.selectChange}>\n        {\n          this.state.authorData.map(el=> <option value={el.id}>{el.name}</option>)\n        }\n          </select>\n        </label>\n        <br /> \n        <label>\n          Price:\n          <input\n            type=\"number\"\n            name=\"price\"\n            placeholder=\"please enter the price\"\n            onChange={this.handleInputChange}\n            // value={this.state.price}\n          />\n        </label>\n        <br />\n        <label>\n          ISBN:\n          <input\n            type=\"number\"\n            name=\"isbn\"\n            placeholder=\"please enter the isbn\"\n            onChange={this.handleInputChange}\n            // value={this.state.isbn}\n          />\n        </label>\n        <br />\n        <label>\n          Description:\n          <textarea\n            placeholder=\"please enter the description\"\n            name=\"description\"\n            onChange={this.handleInputChange}\n            // value={this.state.description}\n          />\n        </label>\n        <br />\n        \n        </div>\n        <input type=\"submit\" />\n        <input type=\"button\" value=\"edit\" onClick={this.handleEdit} />\n      </form>\n    );\n  }\n}\n\nexport default NewBook;\n"]},"metadata":{},"sourceType":"module"}